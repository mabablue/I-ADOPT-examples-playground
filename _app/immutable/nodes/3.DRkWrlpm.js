import"../chunks/DsnmJJEf.js";import{o as Z,ap as it,M as b,N as d,aq as at,O as f,P as l,R as n,S as m,at as E,ar as vt,as as G,x as mt,aC as tt,au as X,Q as gt,aD as et,av as ft}from"../chunks/i9l11uot.js";import{s as I}from"../chunks/CrMtVf6c.js";import{i as M}from"../chunks/C975QuNN.js";import{e as H,i as Q,r as dt,s as P,a as _t}from"../chunks/BZel-GpZ.js";const st=[...` 	
\r\fÂ \v\uFEFF`];function ut(i,t,e){var s=""+i;if(e){for(var a in e)if(e[a])s=s?s+" "+a:a;else if(s.length)for(var c=a.length,r=0;(r=s.indexOf(a,r))>=0;){var v=r+c;(r===0||st.includes(s[r-1]))&&(v===s.length||st.includes(s[v]))?s=(r===0?"":s.substring(0,r))+s.substring(v+1):r=v}}return s===""?null:s}function bt(i,t,e,s,a,c){var r=i.__className;if(Z||r!==e||r===void 0){var v=ut(e,s,c);(!Z||v!==i.getAttribute("class"))&&(v==null?i.removeAttribute("class"):i.className=v),i.__className=e}else if(c&&a!==c)for(var _ in c){var w=!!c[_];(a==null||w!==!!a[_])&&i.classList.toggle(_,w)}return c}const rt=["hasPart"],nt=["hasSource","hasTarget"],lt=[...rt,...nt];class T{static#e=["en",""];#t;_iri;_shortIri;_label={};_comment={};_isBlank;_constrained=[];#s="";constructor({iri:t,shortIri:e,label:s,comment:a,isBlank:c}={}){this._iri=t,this._shortIri=e,this._isBlank=c??!t,typeof s=="string"?this._label[""]=s:this._label=Object.fromEntries(Object.entries(s??{}).filter(([r,v])=>v)),typeof a=="string"?this._comment[""]=a:this._comment=Object.fromEntries(Object.entries(a??{}).filter(([r,v])=>v))}clone(){return new T({iri:this._iri,shortiri:this._shortIri,label:JSON.parse(JSON.stringify(this._label)),comment:JSON.parse(JSON.stringify(this._comment)),isblank:this._isBlank})}setVariable(t){this.#t=t}getVariable(){return this.#t}getIri(){return this._isBlank?null:this._iri}getShortIri(){return this._isBlank?null:this._shortIri}isBlank(){return this._isBlank}setLabel(t,e){this._label[t]=e}getLabel(){for(const s of T.#e)if(s in this._label)return this._label[s];let t=Object.values(this._label)[0];if(t)return t;const e=this._iri.split("/");return e.pop()||e.pop()||"[missing label]"}setComment(t,e){this._comment[t]=e}getComment(){for(const t of T.#e)if(t in this._comment)return this._comment[t];return Object.values(this._comment)[0]}setRole(t){this.#s=t}getRole(){return this.#s}}class pt extends T{#e;#t;#s;#r;#i=[];#a=[];setProperty(t){if(!(t instanceof ct))throw new Error("Can only assign instances of Property!");t.setVariable(this),t.setRole("Property"),this.#e=t}setObjectOfInterest(t){if(!(t instanceof V))throw new Error("Can only assign instances of Entity!");t.setVariable(this),t.setRole("OoI"),this.#t=t}setMatrix(t){if(!(t instanceof V))throw new Error("Can only assign instances of Entity!");t.setVariable(this),t.setRole("Matrix"),this.#s=t}setStatisticalModifier(t){if(!(t instanceof V))throw new Error("Can only assign instances of Entity!");t.setVariable(this),t.setRole("StatisticalModifier"),this.#r=t}addContextObject(t){if(!(t instanceof V))throw new Error("Can only assign instances of Entity!");t.setVariable(this),t.setRole("ContextObject"),this.#i.push(t)}addConstraint(t,...e){if(!(t instanceof ot))throw new Error("Can only assign instances of Constraint!");if(e.some(s=>s.getVariable()!=this))throw Error("Can only constrain entities of the same variable!");if(this.#a.includes(t)){const s=t.getEntities();for(const a of e)s.includes(a)||(t.addEntity(a),a._addConstraint(t));return}for(const s of e)t.addEntity(s),s._addConstraint(t);t.setRole("Constraint"),this.#a.push(t)}getProperty(){return this.#e}getObjectOfInterest(){return this.#t}getMatrix(){return this.#s}getStatisticalModifier(){return this.#r}getContextObjects(){return this.#i.slice(0)}getConstraints(){return this.#a.slice(0)}getClassLabel(){return"Variable"}toString(){return`[Variable ${this._iri?`(${this._iri})`:"(_blank)"}`+(Object.values(this._label).length?`
  label:
`+Object.entries(this._label).map(([t,e])=>`    ${t}: ${e}`).join(`
`):"")+(Object.values(this._comment).length?`
  comment:
`+Object.entries(this._comment).map(([t,e])=>`    ${t}: ${e}`).join(`
`):"")+`
  Property:
${this.#e?this.#e.toString().split(`
`).map(t=>`    ${t}`).join(`
`):"-"}
  ObjectOfInterest:
${this.#t?this.#t.toString().split(`
`).map(t=>`    ${t}`).join(`
`):"-"}
  Matrix:
${this.#s?this.#s.toString().split(`
`).map(t=>`    ${t}`).join(`
`):"-"}
  ContextObject:
${this.#i.length?this.#i.map(t=>t.toString().split(`
`).map(e=>`    ${e}`).join(`
`)).join(`
`):"-"}
]`}}class ot extends T{#e=[];addEntity(t){this.#e.push(t)}getEntities(){return this.#e.slice(0)}getClassLabel(){return"Constraint"}toString(){return`[Constraint ${this._iri?`(${this._iri})`:"(_blank)"}`+(Object.values(this._label).length?`
  label:
`+Object.entries(this._label).map(([t,e])=>`    ${t}: ${e}`).join(`
`):"")+(Object.values(this._comment).length?`
  comment:
`+Object.entries(this._comment).map(([t,e])=>`    ${t}: ${e}`).join(`
`):"")+`
]`}}class V extends T{#e=[];#t={};setVariable(t){super.setVariable(t),Object.values(this.#t).forEach(e=>e.forEach(s=>s.setVariable(t)))}_addConstraint(t){this.#e.push(t)}addConstraint(t){this.#e.push(t)}getConstraints(){return Array.from(this.#e)}addComponent(t,e){if(!lt.includes(t))throw new Error("Invalid property to connect a System to its components: "+t);t in this.#t||(this.#t[t]=[]),e.setVariable(this.getVariable()),e.setRole("SystemComponent"),this.#t[t].push(e)}getComponents(){return Object.entries(this.#t).reduce((t,e)=>(t[e[0]]=Array.from(e[1]),t),{})}getComponentCount(){return Object.entries(this.#t).reduce((t,e)=>t+e[1].length,0)}isSystem(){return Object.keys(this.#t).length>0}getClassLabel(){switch(!0){case this.getRole()=="StatisticalModifier":return"Stat. Mod.";case rt.some(t=>t in this.#t):return"SymmetricSystem";case nt.some(t=>t in this.#t):return"AsymmetricSystem";default:return"Entity"}}toString(){return`[Entity ${this._iri?`(${this._iri})`:"(_blank)"}`+(Object.values(this._label).length?`
  label:
`+Object.entries(this._label).map(([t,e])=>`    ${t}: ${e}`).join(`
`):"")+(Object.values(this._comment).length?`
  comment:
`+Object.entries(this._comment).map(([t,e])=>`    ${t}: ${e}`).join(`
`):"")+(Object.values(this.#e).length?`
  constrained:
`+this.#e.map(t=>t.toString().split(`
`).map(e=>`    ${e}`).join(`
`)).join(`
`):"-")+`
]`}clone(){const t=new V({iri:this._iri,shortIri:this._shortIri,label:this._label,comment:this._comment,isBlank:this._isBlank});for(const e of this.#e)t._addConstraint(e);for(const e in this.#t)for(const s of this.#t[e])t.addComponent(e,s.clone());return t}}class ct extends V{getClassLabel(){return"Property"}toString(){return`[Entity ${this._iri?`(${this._iri})`:"(_blank)"}`+(Object.values(this._label).length?`
  label:
`+Object.entries(this._label).map(([t,e])=>`    ${t}: ${e}`).join(`
`):"")+(Object.values(this._comment).length?`
  comment:
`+Object.entries(this._comment).map(([t,e])=>`    ${t}: ${e}`).join(`
`):"")+`
]`}}function jt(i){const t=new pt({iri:i["@id"],label:i.label,comment:i.comment}),e={};let s=D(i.property,ct,e);if(s&&t.setProperty(s),s=D(i.statisticalModifier,V,e),s&&t.setStatisticalModifier(s),s=D(i.ooi,V,e),s&&t.setObjectOfInterest(s),s=D(i.matrix,V,e),s&&t.setMatrix(s),i.context)for(const a of i.context)s=D(a,V,e),t.addContextObject(s);if(i.constraint)for(const a of i.constraint){let{constraint:c,entities:r}=Ot(a);r=r.map(v=>e[v]),t.addConstraint(c,...r)}return t}function D(i,t,e){if(!i)return;const s=new t({iri:i["@id"],label:i.label,comment:i.comment});e[s.getIri()]=s;for(const a of lt)if(a in i){const c=Array.isArray(i[a])?i[a].map(r=>D(r,t,e)):[D(i[a],t,e)];for(const r of c)s.addComponent(a,r),e[r.getIri()]=r}return s}function Ot(i){if(i)return{constraint:new ot({iri:i["@id"],label:i.label,comment:i.comment}),entities:i.constrains}}var Ct=b("<a><li> </li></a>"),St=b('<li class="svelte-1p7wivt"><label class="svelte-1p7wivt"><i> </i></label> <input type="checkbox" class="svelte-1p7wivt"/> <ul class="svelte-1p7wivt"></ul></li>'),wt=b('<div class="navBox svelte-1p7wivt"><div class="navBoxHead">Navigation</div> <div class="navBoxBody svelte-1p7wivt"><ul class="svelte-1p7wivt"></ul></div></div>');function yt(i,t){it(t,!0);const e=t.selected.split("/").slice(0,-1).map(()=>"..").join("/"),s=Object.keys(t.variables).find(v=>t.variables[v].some(_=>_.path==t.selected));var a=wt(),c=f(l(a),2),r=l(c);H(r,21,()=>Object.keys(t.variables),Q,(v,_)=>{var w=St(),y=l(w),J=l(y),B=l(J,!0);n(J),n(y);var k=f(y,2);dt(k);var Y=f(k,2);H(Y,21,()=>t.variables[m(_)],Q,($,h)=>{var o=Ct(),u=l(o);let C;var p=l(u,!0);n(u),n(o),E(x=>{P(o,"href",(e?`${e}/${m(h).path}`:m(h).path)+".html"),C=bt(u,1,"svelte-1p7wivt",null,C,x),I(p,m(h).title)},[()=>({selected:t.selected==m(h).path})]),d($,o)}),n(Y),n(w),E(()=>{P(y,"for",`checkBox${m(_)??""}`),I(B,m(_)),P(k,"id",`checkBox${m(_)??""}`),_t(k,s==m(_))}),d(v,w)}),n(r),n(c),n(a),d(i,a),at()}const F=(i,t=mt)=>{var e=tt(),s=G(e);{var a=c=>{var r=Pt(),v=l(r);{var _=h=>{var o=xt(),u=l(o,!0);n(o),E((C,p)=>{P(o,"href",C),I(u,p)},[()=>t().getIri(),()=>t().getLabel()]),d(h,o)},w=h=>{var o=et();E(u=>I(o,u),[()=>t().getLabel()]),d(h,o)};M(v,h=>{t().getIri()?h(_):h(w,!1)})}var y=f(v,2);{var J=h=>{var o=Et(),u=l(o,!0);n(o),E(C=>I(u,C),[()=>t().getComment()]),d(h,o)};M(y,h=>{t().getComment()&&h(J)})}var B=f(y,2);{var k=h=>{var o=Rt(),u=f(l(o),2);H(u,21,()=>t().getConstraints(),Q,(C,p)=>{var x=Vt(),z=l(x);{var q=O=>{var j=et();E(R=>I(j,R),[()=>m(p).getLabel()]),d(O,j)},N=O=>{var j=It(),R=l(j,!0);n(j),E((K,g)=>{P(j,"href",K),I(R,g)},[()=>m(p).getIri(),()=>m(p).getLabel()]),d(O,j)};M(z,O=>{m(p).isBlank()?O(q):O(N,!1)})}var L=f(z,2);{var U=O=>{var j=Mt(),R=l(j,!0);n(j),E(K=>I(R,K),[()=>m(p).getComment()]),d(O,j)};M(L,O=>{m(p).getComment()&&O(U)})}n(x),d(C,x)}),n(u),n(o),d(h,o)};M(B,h=>{t().getConstraints().length>0&&h(k)})}var Y=f(B,2);{var $=h=>{var o=tt(),u=G(o);H(u,17,()=>Object.entries(t().getComponents()),Q,(C,p)=>{var x=X(()=>ft(m(p),2));let z=()=>m(x)[0],q=()=>m(x)[1];var N=kt(),L=l(N),U=l(L,!0);n(L);var O=f(L,2);H(O,17,q,Q,(j,R)=>{F(j,()=>m(R))}),n(N),E(()=>I(U,z())),d(C,N)}),d(h,o)};M(Y,h=>{t().getComponentCount()>0&&h($)})}n(r),d(c,r)};M(s,c=>{t()&&c(a)})}d(i,e)};var xt=b("<a> </a>"),Et=b('<p class="desc svelte-1g9s8gm"> </p>'),It=b("<a> </a>"),Mt=b('<p class="description"> </p>'),Vt=b('<li class="constraint-item"><!> <!></li>'),Rt=b('<div><span class="subheading">Constraint(s)</span> <ul class="constraint-list"></ul></div>'),kt=b('<dl class="svelte-1g9s8gm"><dt class="subheading svelte-1g9s8gm"> </dt> <!></dl>'),Pt=b("<dd><!> <!> <!> <!></dd>"),Bt=b('<a target="_blank" aria-label="Discuss on Github" class="svelte-1g9s8gm"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 367.4 90" style="height: 1em;"><g fill="currentColor"><path d="m46.1 0c-25.5 0-46.1 20.6-46.1 46.1 0 20.4 13.2 37.7 31.5 43.8 2.3.4 3.2-1 3.2-2.2 0-1.1-.1-4.7-.1-8.6-11.6 2.1-14.6-2.8-15.5-5.4-.5-1.3-2.8-5.4-4.7-6.5-1.6-.9-3.9-3-.1-3.1 3.6-.1 6.2 3.3 7.1 4.7 4.2 7 10.8 5 13.4 3.8.4-3 1.6-5 2.9-6.2-10.3-1.2-21-5.1-21-22.8 0-5 1.8-9.2 4.7-12.4-.5-1.2-2.1-5.9.5-12.2 0 0 3.9-1.2 12.7 4.7 3.7-1 7.6-1.6 11.5-1.6s7.8.5 11.5 1.6c8.8-6 12.7-4.7 12.7-4.7 2.5 6.3.9 11.1.5 12.2 2.9 3.2 4.7 7.3 4.7 12.4 0 17.7-10.8 21.6-21.1 22.8 1.7 1.4 3.1 4.2 3.1 8.5 0 6.2-.1 11.1-.1 12.7 0 1.2.9 2.7 3.2 2.2 18.2-6.1 31.4-23.4 31.4-43.8.3-25.4-20.4-46-45.9-46z"></path><path d="m221.6 67.1h-.1zm0 0c-.5 0-1.8.3-3.2.3-4.4 0-5.9-2-5.9-4.6v-17.5h8.9c.5 0 .9-.4.9-1.1v-9.5c0-.5-.4-.9-.9-.9h-8.9v-11.7c0-.4-.3-.7-.8-.7h-12c-.5 0-.8.3-.8.7v12.1s-6.1 1.5-6.5 1.6-.7.5-.7.9v7.6c0 .6.4 1.1.9 1.1h6.2v18.3c0 13.6 9.5 15 16 15 3 0 6.5-.9 7.1-1.2.3-.1.5-.5.5-.9v-8.4c.1-.6-.3-1-.8-1.1zm132.2-12.2c0-10.1-4.1-11.4-8.4-11-3.3.2-6 1.9-6 1.9v19.6s2.7 1.9 6.8 2c5.8.2 7.6-1.9 7.6-12.5zm13.6-.9c0 19.1-6.2 24.6-17 24.6-9.1 0-14.1-4.6-14.1-4.6s-.2 2.6-.5 2.9c-.2.3-.4.4-.8.4h-8.3c-.6 0-1.1-.4-1.1-.9l.1-62c0-.5.4-.9.9-.9h11.9c.5 0 .9.4.9.9l-.1 20.9s4.6-3 11.3-3h.1c6.8-0 16.7 2.5 16.7 21.7zm-48.7-20.2h-11.7c-.6 0-.9.4-.9 1.1v30.3s-3.1 2.2-7.3 2.2-5.4-1.9-5.4-6.1v-26.5c0-.5-.4-.9-.9-.9h-11.9c-.5 0-.9.4-.9.9v28.5c0 12.3 6.9 15.3 16.3 15.3 7.8 0 14.1-4.3 14.1-4.3s.3 2.2.4 2.5.5.5.9.5h7.5c.6 0 .9-.4.9-.9l.1-41.7c-.1-.4-.6-.9-1.2-.9zm-132.2 0h-11.9c-.5 0-.9.5-.9 1.1v40.9c0 1.1.7 1.5 1.7 1.5h10.7c1.1 0 1.4-.5 1.4-1.5v-41.1c0-.5-.5-.9-1-.9zm-5.8-18.9c-4.3 0-7.7 3.4-7.7 7.7s3.4 7.7 7.7 7.7c4.2 0 7.6-3.4 7.6-7.7s-3.4-7.7-7.6-7.7zm92-1.4h-11.8c-.5 0-.9.4-.9.9v22.8h-18.5v-22.7c0-.5-.4-.9-.9-.9h-11.9c-.5 0-.9.4-.9.9v62c0 .5.5.9.9.9h11.9c.5 0 .9-.4.9-.9v-26.6h18.5l-.1 26.5c0 .5.4.9.9.9h11.9c.5 0 .9-.4.9-.9v-62c0-.4-.4-.9-.9-.9zm-105.3 27.5v32c0 .2-.1.6-.3.7 0 0-7 5-18.5 5-13.9 0-30.3-4.4-30.3-33 0-28.7 14.4-34.6 28.4-34.5 12.2 0 17.1 2.7 17.8 3.2.2.3.3.5.3.8l-2.3 9.9c0 .5-.5 1.1-1.1.9-2-.6-5-1.8-12.1-1.8-8.2 0-17 2.3-17 20.8s8.4 20.6 14.4 20.6c5.1 0 7-.6 7-.6v-12.8h-8.2c-.6 0-1.1-.4-1.1-.9v-10.3c0-.5.4-.9 1.1-.9h20.9c.6-.1 1 .4 1 .9z"></path></g></svg></a>'),Lt=b('<dt class="svelte-1g9s8gm">Statistical Modifier</dt> <!>',1),$t=b('<dt class="svelte-1g9s8gm">Matrix</dt> <!>',1),zt=b('<dt class="svelte-1g9s8gm">Context Objects</dt> <!>',1),Nt=vt(b(`<nav><!></nav> <main class="svelte-1g9s8gm"><div class="svelte-1g9s8gm"><section class="svelte-1g9s8gm"><h2 class="svelte-1g9s8gm"> </h2> <p class="links svelte-1g9s8gm"><!> <a target="_blank" aria-label="Download RDF" class="svelte-1g9s8gm"><img style="height: 1em;" alt="Download RDF"/></a></p> <p class="description"> </p></section> <section class="textual svelte-1g9s8gm"><dl class="svelte-1g9s8gm"><dt class="svelte-1g9s8gm">Property</dt> <!> <dt class="svelte-1g9s8gm">Object of Interest</dt> <!> <!> <!> <!></dl></section></div> <br/> <div class="vis svelte-1g9s8gm"><iframe title="Visualization of the Variable" class="svelte-1g9s8gm"></iframe> <script>
      function updateVisSize( ev ) {
        // set the proper iframe ratio
        const iframe = document.querySelector( 'iframe' );
        const ratio = ev.data.width / ev.data.height;
        iframe.style.aspectRatio = ratio;
        // remove the listener
        window.removeEventListener( 'message', updateVisSize );
      }
      window.addEventListener( 'message', updateVisSize );
    <\/script></div></main>`,1));function qt(i,t){it(t,!0);const e=jt(t.data.variable),s=t.data.path.split("/").slice(0,-1).map(()=>"..").join("/");var a=Nt(),c=G(a),r=l(c);yt(r,{get selected(){return t.data.path},get variables(){return t.data.variableList}}),n(c);var v=f(c,2),_=l(v),w=l(_),y=l(w),J=l(y,!0);n(y);var B=f(y,2),k=l(B);{var Y=g=>{var S=Bt();E(()=>P(S,"href",t.data.issue)),d(g,S)};M(k,g=>{t.data.issue&&g(Y)})}var $=f(k,2),h=l($);n($),n(B);var o=f(B,2),u=l(o,!0);n(o),n(w);var C=f(w,2),p=l(C),x=f(l(p),2);{let g=X(()=>e.getProperty());F(x,()=>m(g))}var z=f(x,4);{let g=X(()=>e.getObjectOfInterest());F(z,()=>m(g))}var q=f(z,2);{var N=g=>{var S=Lt(),A=f(G(S),2);{let W=X(()=>e.getStatisticalModifier());F(A,()=>m(W))}d(g,S)};M(q,g=>{e.getStatisticalModifier()&&g(N)})}var L=f(q,2);{var U=g=>{var S=$t(),A=f(G(S),2);{let W=X(()=>e.getMatrix());F(A,()=>m(W))}d(g,S)};M(L,g=>{e.getMatrix()&&g(U)})}var O=f(L,2);{var j=g=>{var S=zt(),A=f(G(S),2);H(A,17,()=>e.getContextObjects(),Q,(W,ht)=>{F(W,()=>m(ht))}),d(g,S)};M(O,g=>{e.getContextObjects().length>0&&g(j)})}n(p),n(C),n(_);var R=f(_,4),K=l(R);gt(2),n(R),n(v),E((g,S,A)=>{I(J,g),P($,"href",`${s}/${t.data.path}`),P(h,"src",`${s}/rdf.svg`),I(u,S),P(K,"src",`https://sirkos.github.io/iadopt-vis/remote.html?jsonld=${A??""}`)},[()=>e.getLabel(),()=>e.getComment(),()=>encodeURIComponent(JSON.stringify(t.data.variable))]),d(i,a),at()}export{qt as component};
